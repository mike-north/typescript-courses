{
    "componentChunkName": "component---src-templates-blog-post-tsx",
    "path": "/course/full-stack-typescript/12-favorites/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Learn TypeScript w/ Mike North","courses":[{"id":"fundamentals-v3","title":"TypeScript Fundamentals v3","summary":"Learn everything you need to know in order to confidently and successfully use TypeScript to build a modern JavaScript app."},{"id":"intermediate-v1","title":"Intermediate TypeScript","summary":"Leverage TypeScript's strengths to provide clarity in the face of\ncomplexity, while protecting your codebase and team from it's weaknesses.\n"},{"id":"making-typescript-stick","title":"Making TypeScript Stick","summary":"Tackle a series of challenges designed to reinforce your knowledge and make\nthe important concepts truly \"stick\" in your mind.\n"},{"id":"full-stack-typescript","title":"Full Stack TypeScript","summary":"Combine TypeScript and GraphQL's type systems to create full-stack, fully\ntype-checked code bases that are shockingly easy to refactor and maintain.\n"}]}},"markdownRemark":{"id":"44cad363-0225-5af2-89b9-3f8298bcd1f9","excerpt":"Schema Update your graphql.schema by adding the following and add a favorites field to the User type In client/src/App.tsx update the current user query to…","html":"<h2 id=\"schema\" style=\"position:relative;\"><a href=\"#schema\" aria-label=\"schema permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Schema</h2>\n<p>Update your <code>graphql.schema</code> by adding the following</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">graphql</div><div class='code-container'><code><div class='line'><span style=\"color: #D73A49\">type</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">Favorite</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #E36209\">id</span><span style=\"color: #24292E\">: </span><span style=\"color: #005CC5\">String</span><span style=\"color: #D73A49\">!</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #E36209\">tweet</span><span style=\"color: #24292E\">: </span><span style=\"color: #005CC5\">Tweet</span><span style=\"color: #D73A49\">!</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #E36209\">user</span><span style=\"color: #24292E\">: </span><span style=\"color: #005CC5\">User</span><span style=\"color: #D73A49\">!</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #E36209\">createdAt</span><span style=\"color: #24292E\">: </span><span style=\"color: #005CC5\">String</span><span style=\"color: #D73A49\">!</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #E36209\">updatedAt</span><span style=\"color: #24292E\">: </span><span style=\"color: #005CC5\">String</span><span style=\"color: #D73A49\">!</span></div><div class='line'><span style=\"color: #24292E\">}</span></div></code></div></pre>\n<p>and add a <code>favorites</code> field to the <code>User</code> type</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">graphql</div><div class='code-container'><code><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #6F42C1\">favorites</span><span style=\"color: #24292E\">: [</span><span style=\"color: #6F42C1\">Favorite</span><span style=\"color: #24292E\">!]</span></div></code></div></pre>\n<p>In <code>client/src/App.tsx</code> update the current user query to include a <code>favorites</code> field</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #24292E\">    currentUser {</span></div><div class='line'><span style=\"color: #24292E\">      id</span></div><div class='line'><span style=\"color: #24292E\">      name</span></div><div class='line'><span style=\"color: #24292E\">      handle</span></div><div class='line'><span style=\"color: #24292E\">      avatarUrl</span></div><div class='line'><span style=\"color: #24292E\">      createdAt</span></div><div class='line'><span style=\"color: #24292E\">      stats {</span></div><div class='line'><span style=\"color: #24292E\">        tweetCount</span></div><div class='line'><span style=\"color: #24292E\">        followingCount</span></div><div class='line'><span style=\"color: #24292E\">        followerCount</span></div><div class='line'><span style=\"color: #24292E\">      }</span></div><div class='line'><span style=\"color: #22863A\">+     favorites {</span></div><div class='line'><span style=\"color: #22863A\">+       tweet {</span></div><div class='line'><span style=\"color: #22863A\">+         id</span></div><div class='line'><span style=\"color: #22863A\">+       }</span></div><div class='line'><span style=\"color: #22863A\">+     }</span></div><div class='line'><span style=\"color: #24292E\">    }</span></div><div class='line'><span style=\"color: #24292E\">    suggestions {</span></div><div class='line'><span style=\"color: #24292E\">      name</span></div></code></div></pre>\n<p>Run <code>yarn codegen</code> in both the <code>client</code> and <code>server</code> sub-projects to get\nupdated TS types that include this change to the schema and query</p>\n<h2 id=\"backend\" style=\"position:relative;\"><a href=\"#backend\" aria-label=\"backend permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Backend</h2>\n<p>In <code>server/src/transforms.ts</code> add a new transform function</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #D73A49\">import</span><span style=\"color: #24292E\"> { DbFavorite } </span><span style=\"color: #D73A49\">from</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">\"./db\"</span></div><div class='line'><span style=\"color: #D73A49\">import</span><span style=\"color: #24292E\"> { Favorite } </span><span style=\"color: #D73A49\">from</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">\"./resolvers-types.generated\"</span></div><div class='line'></div><div class='line'><span style=\"color: #D73A49\">export</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> </span><span style=\"color: #6F42C1\">favoriteTransform</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> (</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #E36209\">t</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">DbFavorite</span></div><div class='line'><span style=\"color: #24292E\">)</span><span style=\"color: #D73A49\">:</span><span style=\"color: #24292E\"> </span><span style=\"color: #E36209\">Omit</span><span style=\"color: #24292E\">&lt;</span><span style=\"color: #E36209\">Favorite</span><span style=\"color: #24292E\">, </span><span style=\"color: #032F62\">\"user\"</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">|</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">\"tweet\"</span><span style=\"color: #24292E\">&gt; </span><span style=\"color: #D73A49\">=&gt;</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">    id: t.id,</span></div><div class='line'><span style=\"color: #24292E\">    createdAt: t.createdAt,</span></div><div class='line'><span style=\"color: #24292E\">    updatedAt: t.updatedAt,</span></div><div class='line'><span style=\"color: #24292E\">  }</span></div><div class='line'><span style=\"color: #24292E\">}</span></div></code></div></pre>\n<p>import it into your <code>User</code> resolvers <code>server/src/resolvers/User.ts</code>,\nand use it to add a new <code>favorites()</code> function</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #D73A49\">import</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">  favoriteTransform,</span></div><div class='line'><span style=\"color: #24292E\">  tweetTransform,</span></div><div class='line'><span style=\"color: #24292E\">} </span><span style=\"color: #D73A49\">from</span><span style=\"color: #24292E\"> </span><span style=\"color: #032F62\">\"../transforms\"</span></div></code></div></pre>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">ts</div><div class='code-container'><code><div class='line'><span style=\"color: #24292E\">  </span><span style=\"color: #6F42C1\">favorites</span><span style=\"color: #24292E\">(user, _, { db }) {</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">const</span><span style=\"color: #24292E\"> </span><span style=\"color: #005CC5\">faves</span><span style=\"color: #24292E\"> </span><span style=\"color: #D73A49\">=</span><span style=\"color: #24292E\"> db.</span><span style=\"color: #6F42C1\">getUserFavorites</span><span style=\"color: #24292E\">(user.id);</span></div><div class='line'><span style=\"color: #24292E\">    </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> faves.</span><span style=\"color: #6F42C1\">map</span><span style=\"color: #24292E\">((</span><span style=\"color: #E36209\">f</span><span style=\"color: #24292E\">) </span><span style=\"color: #D73A49\">=&gt;</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">      </span><span style=\"color: #D73A49\">return</span><span style=\"color: #24292E\"> {</span></div><div class='line'><span style=\"color: #24292E\">        </span><span style=\"color: #D73A49\">...</span><span style=\"color: #6F42C1\">favoriteTransform</span><span style=\"color: #24292E\">(f),</span></div><div class='line'><span style=\"color: #24292E\">        user,</span></div><div class='line'><span style=\"color: #24292E\">        tweet: </span><span style=\"color: #6F42C1\">tweetTransform</span><span style=\"color: #24292E\">(db.</span><span style=\"color: #6F42C1\">getTweetById</span><span style=\"color: #24292E\">(f.tweetId)),</span></div><div class='line'><span style=\"color: #24292E\">      };</span></div><div class='line'><span style=\"color: #24292E\">    });</span></div><div class='line'><span style=\"color: #24292E\">  },</span></div></code></div></pre>\n<h2 id=\"ui\" style=\"position:relative;\"><a href=\"#ui\" aria-label=\"ui permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>UI</h2>\n<p>Go back to <code>client/src/App.tsx</code>, and replace all occurrences of <code>CURRENT_USER</code> with <code>currentUser</code>.</p>\n<p>Be careful with this change — you can eliminate the merge of the objects entirely</p>\n<pre class=\"shiki github-light\" style=\"background-color: #ffffff; color: #24292e\"><div class=\"language-id\">diff</div><div class='code-container'><code><div class='line'><span style=\"color: #B31D28\">-&lt;LeftSidebar currentUser={{...CURRENT_USER, ...currentUser}} /&gt;</span></div><div class='line'><span style=\"color: #22863A\">+&lt;LeftSidebar currentUser={currentUser} /&gt;</span></div></code></div></pre>\n<p>You may also need to reorganize a few lines of code so that <strong>variables are only used after they’re declared</strong></p>\n<p>If everything is working properly, you’ll see that one tweet in the feed is already “liked”</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 724px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dfdcaac47488a8b60dc13c23bbaf265e/a242d/liked.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 70%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAABYlAAAWJQFJUiTwAAACr0lEQVQ4y42TW08TQRiG+Qv4C4i3YjhYEiGKRu+I8ecYL8Qb/AeaeM2tFxrQKohYsC32XIpIl1a228P2zG67tE237fYxM1XUeIhf8ma+mew+M+8334wVCgVs20bEcDjk53AcR46apnFh/ALj4+O4rri4MjPD9es3uLN0l4WFBW4u3mZx8QbX5m8x9j/AbDbL3JyLyUuTTE9NcXFiApfLxdLSErOzM1y+NMX09DRX56/+Azj8Me/3+rRbLVpnZ5iGiWU1aTQamKaJaRo0miaGccrp6elfgMNvQDE4o7XOoEOxXhyVIKORz+dlrutF2u32+Tl+A57rG9HBgRo44QFnuxbkIBwLcZBIyH/S6RRnlvVv4KiAjKBFKL4s438XJuiNE11N8Hn9GH8sRDiyjz8QIhCOEoxE2QuGR8But/uL5e+X4Qwd2Ac1leWZe53nbjev3m8ReBpj7fkma282WX/9ljX3htQL98bvJxQwRVHIaBnaZpvE6shaOBAkGojIvBeypYM/hQR2Op3zhX6/LzewuzYDBtghm6E2xHIsrIFFv9Kn67PpOT16vZ78XkjkQhIorl/XdZJJRbaDyEvFEqVyCT2rU31dpbpRpbHTwNwwqWgV6madeq1OpVKRqtVqo7bR9QJ1w2Bl+SFPHi1T1HN4vV68vl1i8QjvPG/xfvzAzsv3nMTTaFoGNatKmGEYsn1E45fLZVqt1g/g8r37PF55QLVcRIlliXgUojvHxHZTRD0Kwe0j4ntpEuEkfr8Pv3+Pra0tPB4P29vb+Hw+QqHQyLLYKZfLoygpTLOB9iXPUfyE1CeN5P4J6cMsSkIlGVfJZQqo6gmFgk4mk5HvXFVVBEdoTNRL+G82G1iWJfNA8CMHhwlKZZ2dXQ+VWhnl+IhoLEK1VpUWRa2bzea5xFzoKyXV4SZYjqdIAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"liked\"\n        title=\"liked\"\n        src=\"/static/dfdcaac47488a8b60dc13c23bbaf265e/a242d/liked.png\"\n        srcset=\"/static/dfdcaac47488a8b60dc13c23bbaf265e/63868/liked.png 250w,\n/static/dfdcaac47488a8b60dc13c23bbaf265e/0b533/liked.png 500w,\n/static/dfdcaac47488a8b60dc13c23bbaf265e/a242d/liked.png 724w\"\n        sizes=\"(max-width: 724px) 100vw, 724px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>","tableOfContents":"<ul>\n<li><a href=\"#schema\">Schema</a></li>\n<li><a href=\"#backend\">Backend</a></li>\n<li><a href=\"#ui\">UI</a></li>\n</ul>","fields":{"slug":"/course/full-stack-typescript/12-favorites/"},"frontmatter":{"title":"Favorites","course":"full-stack-typescript","date":"March 24, 2022","description":"We'll create new data for the first time, using a GraphQL mutation for the \"post a new tweet\" feature\n"}}},"pageContext":{"slug":"/course/full-stack-typescript/12-favorites/","title":"Favorites","course":"full-stack-typescript","order":12,"previous":{"fields":{"slug":"/course/full-stack-typescript/11-nested-data copy/"},"frontmatter":{"title":"Mutations","order":11,"course":"full-stack-typescript","isExercise":null}},"next":{"fields":{"slug":"/course/full-stack-typescript/13-favorites/"},"frontmatter":{"title":"Favorites Interactivity","order":13,"course":"full-stack-typescript","isExercise":null}}}},
    "staticQueryHashes": ["2785745750","2841359383"]}